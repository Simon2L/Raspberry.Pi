@page "/"
@inject ProximityUiState State

<PageTitle>Home</PageTitle>

<MudText Typo="Typo.h3">Proximity</MudText>

@if (State.LastEventSensor1 is not null)
{
    <MudAlert Severity="Severity.Info" Variant="Variant.Filled">
        <MudText Typo="Typo.h5">Sensor 1</MudText>
        <MudText>@State.LastEventSensor1.Value</MudText>
        <MudText>@State.LastEventSensor1.Timestamp.ToString("HH:mm:ff")</MudText>
    </MudAlert>
}

@if (State.LastEventSensor2 is not null)
{
    <MudAlert Severity="Severity.Info" Variant="Variant.Filled">
        <MudText Typo="Typo.h5">Sensor 2</MudText>
        <MudText>@State.LastEventSensor2.Value</MudText>
        <MudText>@State.LastEventSensor2.Timestamp.ToString("HH:mm:ff")</MudText>
    </MudAlert>
}

@code {
    protected override void OnInitialized()
    {
        State.OnChange += () => InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        State.OnChange -= () => InvokeAsync(StateHasChanged);
    }
}
